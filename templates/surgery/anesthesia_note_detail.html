{% extends 'base.html' %}
{% block title %}Nota de Anestesia{% endblock %}
{% block content %}
<div class="container-fluid">
    <h2><i class="bi bi-heart-pulse"></i> Nota de Anestesia - Cirugía {{ surgery.surgery_number }}</h2>
    <p class="text-muted">Paciente: {{ surgery.patient.nombre }}</p>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header bg-danger text-white">Información de Anestesia</div>
                <div class="card-body">
                    <p><strong>Clasificación ASA:</strong> {{ anesthesia_note.get_asa_classification_display }}</p>
                    <p><strong>Tipo de Anestesia:</strong> {{ anesthesia_note.get_anesthesia_type_display }}</p>
                    <p><strong>Horas de Ayuno:</strong> {{ anesthesia_note.fasting_hours }} horas</p>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header bg-primary text-white">Signos Vitales Preoperatorios</div>
                <div class="card-body">
                    <p><strong>Presión Arterial:</strong> {{ anesthesia_note.pre_blood_pressure_systolic }}/{{ anesthesia_note.pre_blood_pressure_diastolic }} mmHg</p>
                    <p><strong>Frecuencia Cardíaca:</strong> {{ anesthesia_note.pre_heart_rate }} lpm</p>
                    <p><strong>Frecuencia Respiratoria:</strong> {{ anesthesia_note.pre_respiratory_rate }} rpm</p>
                    <p><strong>Saturación O2:</strong> {{ anesthesia_note.pre_oxygen_saturation }}%</p>
                    <p><strong>Temperatura:</strong> {{ anesthesia_note.pre_temperature }}°C</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header bg-warning text-white">Medicamentos y Líquidos</div>
                <div class="card-body">
                    <h6>Medicamentos Administrados:</h6>
                    <p>{{ anesthesia_note.medications_administered|default:"No registrado" }}</p>
                    <h6 class="mt-3">Líquidos Administrados:</h6>
                    <p>{{ anesthesia_note.fluids_administered|default:"No registrado" }}</p>
                </div>
            </div>

            {% if anesthesia_note.complications or anesthesia_note.observations %}
            <div class="card mb-3">
                <div class="card-header bg-info text-white">Observaciones</div>
                <div class="card-body">
                    {% if anesthesia_note.complications %}
                    <h6 class="text-danger">Complicaciones:</h6>
                    <p>{{ anesthesia_note.complications }}</p>
                    {% endif %}
                    {% if anesthesia_note.observations %}
                    <h6>Observaciones:</h6>
                    <p>{{ anesthesia_note.observations }}</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="mt-3">
        <a href="{% url 'surgery:anesthesia_note_update' surgery.id %}" class="btn btn-warning">Editar</a>
        <a href="{% url 'surgery:surgery_detail' surgery.id %}" class="btn btn-secondary">Volver</a>
    </div>
</div>
{% endblock %}
