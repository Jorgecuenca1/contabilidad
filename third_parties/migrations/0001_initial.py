# Generated by Django 4.2.16 on 2025-09-06 08:57

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('core', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ThirdParty',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('person_type', models.CharField(choices=[('NATURAL', 'Persona Natural'), ('JURIDICA', 'Persona Jurídica')], max_length=10)),
                ('document_type', models.CharField(choices=[('CC', 'Cédula de Ciudadanía'), ('CE', 'Cédula de Extranjería'), ('NIT', 'NIT'), ('PA', 'Pasaporte'), ('TI', 'Tarjeta de Identidad'), ('RC', 'Registro Civil'), ('NUIP', 'NUIP'), ('DIE', 'Documento de Identificación Extranjero')], max_length=10)),
                ('document_number', models.CharField(max_length=20)),
                ('verification_digit', models.CharField(blank=True, max_length=1)),
                ('first_name', models.CharField(max_length=100)),
                ('middle_name', models.CharField(blank=True, max_length=100)),
                ('last_name', models.CharField(blank=True, max_length=100)),
                ('second_last_name', models.CharField(blank=True, max_length=100)),
                ('trade_name', models.CharField(blank=True, max_length=200)),
                ('is_customer', models.BooleanField(default=False)),
                ('is_supplier', models.BooleanField(default=False)),
                ('is_employee', models.BooleanField(default=False)),
                ('is_shareholder', models.BooleanField(default=False)),
                ('is_bank', models.BooleanField(default=False)),
                ('is_government', models.BooleanField(default=False)),
                ('tax_regime', models.CharField(choices=[('COMUN', 'Régimen Común'), ('SIMPLIFICADO', 'Régimen Simplificado'), ('NO_RESPONSABLE', 'No Responsable'), ('GRAN_CONTRIBUYENTE', 'Gran Contribuyente'), ('AUTORRETENEDOR', 'Autorretenedor'), ('EXTRANJERO', 'Régimen Extranjero')], default='COMUN', max_length=20)),
                ('taxpayer_type', models.CharField(choices=[('NO_APLICA', 'No Aplica'), ('PERSONA_NATURAL', 'Persona Natural'), ('PERSONA_JURIDICA', 'Persona Jurídica'), ('GRAN_CONTRIBUYENTE', 'Gran Contribuyente'), ('ENTIDAD_PUBLICA', 'Entidad Pública'), ('REGIMEN_SIMPLIFICADO', 'Régimen Simplificado')], default='NO_APLICA', max_length=30)),
                ('is_vat_responsible', models.BooleanField(default=True)),
                ('is_ica_agent', models.BooleanField(default=False)),
                ('is_withholding_agent', models.BooleanField(default=False)),
                ('is_self_withholding', models.BooleanField(default=False)),
                ('is_great_contributor', models.BooleanField(default=False)),
                ('great_contributor_resolution', models.CharField(blank=True, max_length=100)),
                ('address', models.CharField(max_length=200)),
                ('neighborhood', models.CharField(blank=True, max_length=100)),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(default='Colombia', max_length=100)),
                ('postal_code', models.CharField(blank=True, max_length=20)),
                ('phone', models.CharField(blank=True, max_length=30)),
                ('mobile', models.CharField(blank=True, max_length=30)),
                ('fax', models.CharField(blank=True, max_length=30)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('website', models.URLField(blank=True)),
                ('economic_activity', models.CharField(blank=True, max_length=200)),
                ('ciiu_code', models.CharField(blank=True, max_length=10)),
                ('legal_representative', models.CharField(blank=True, max_length=200)),
                ('legal_rep_document', models.CharField(blank=True, max_length=20)),
                ('bank_name', models.CharField(blank=True, max_length=100)),
                ('bank_account_type', models.CharField(blank=True, choices=[('SAVINGS', 'Cuenta de Ahorros'), ('CHECKING', 'Cuenta Corriente')], max_length=20)),
                ('bank_account_number', models.CharField(blank=True, max_length=30)),
                ('credit_limit', models.DecimalField(decimal_places=2, default=0, max_digits=20)),
                ('payment_term_days', models.IntegerField(default=30)),
                ('discount_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('contact_person', models.CharField(blank=True, max_length=200)),
                ('contact_position', models.CharField(blank=True, max_length=100)),
                ('contact_phone', models.CharField(blank=True, max_length=30)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
                ('has_rut', models.BooleanField(default=False)),
                ('rut_file', models.FileField(blank=True, null=True, upload_to='third_parties/rut/')),
                ('chamber_commerce_file', models.FileField(blank=True, null=True, upload_to='third_parties/chamber/')),
                ('is_active', models.BooleanField(default=True)),
                ('is_blocked', models.BooleanField(default=False)),
                ('block_reason', models.TextField(blank=True)),
                ('rating', models.CharField(blank=True, choices=[('AAA', 'Excelente'), ('AA', 'Muy Bueno'), ('A', 'Bueno'), ('B', 'Regular'), ('C', 'Malo'), ('D', 'Muy Malo')], max_length=10)),
                ('notes', models.TextField(blank=True)),
                ('internal_notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='third_parties', to='core.company')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_third_parties', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Tercero',
                'verbose_name_plural': 'Terceros',
                'ordering': ['first_name', 'last_name'],
            },
        ),
        migrations.CreateModel(
            name='ThirdPartyType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=10)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('is_customer', models.BooleanField(default=False)),
                ('is_supplier', models.BooleanField(default=False)),
                ('is_employee', models.BooleanField(default=False)),
                ('is_shareholder', models.BooleanField(default=False)),
                ('is_bank', models.BooleanField(default=False)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='third_party_types', to='core.company')),
            ],
            options={
                'unique_together': {('company', 'code')},
            },
        ),
        migrations.CreateModel(
            name='ThirdPartyDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_type', models.CharField(choices=[('RUT', 'RUT'), ('CC', 'Cámara de Comercio'), ('BANK_CERT', 'Certificación Bancaria'), ('FINANCIAL_STATES', 'Estados Financieros'), ('COMMERCIAL_REF', 'Referencias Comerciales'), ('CONTRACT', 'Contrato'), ('POLICY', 'Póliza'), ('OTHER', 'Otro')], max_length=20)),
                ('name', models.CharField(max_length=200)),
                ('file', models.FileField(upload_to='third_parties/documents/')),
                ('description', models.TextField(blank=True)),
                ('issue_date', models.DateField(blank=True, null=True)),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('third_party', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='third_parties.thirdparty')),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='ThirdPartyContact',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('position', models.CharField(blank=True, max_length=100)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('phone', models.CharField(blank=True, max_length=30)),
                ('mobile', models.CharField(blank=True, max_length=30)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('is_primary', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('third_party', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contacts', to='third_parties.thirdparty')),
            ],
            options={
                'ordering': ['-is_primary', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ThirdPartyAddress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('address_type', models.CharField(choices=[('MAIN', 'Principal'), ('BILLING', 'Facturación'), ('SHIPPING', 'Envío'), ('BRANCH', 'Sucursal'), ('WAREHOUSE', 'Bodega'), ('OTHER', 'Otra')], default='MAIN', max_length=20)),
                ('name', models.CharField(blank=True, max_length=100)),
                ('address', models.CharField(max_length=200)),
                ('neighborhood', models.CharField(blank=True, max_length=100)),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(default='Colombia', max_length=100)),
                ('postal_code', models.CharField(blank=True, max_length=20)),
                ('phone', models.CharField(blank=True, max_length=30)),
                ('is_primary', models.BooleanField(default=False)),
                ('third_party', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='addresses', to='third_parties.thirdparty')),
            ],
            options={
                'verbose_name_plural': 'Third Party Addresses',
                'ordering': ['-is_primary', 'address_type'],
            },
        ),
        migrations.AddField(
            model_name='thirdparty',
            name='third_party_types',
            field=models.ManyToManyField(blank=True, to='third_parties.thirdpartytype'),
        ),
        migrations.AddField(
            model_name='thirdparty',
            name='updated_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='updated_third_parties', to=settings.AUTH_USER_MODEL),
        ),
        migrations.CreateModel(
            name='CompanyExtended',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_type', models.CharField(choices=[('PUBLIC', 'Empresa Pública'), ('PRIVATE', 'Empresa Privada'), ('MIXED', 'Empresa Mixta'), ('NGO', 'ONG/Sin Ánimo de Lucro'), ('GOVERNMENT', 'Entidad Gubernamental'), ('COOPERATIVE', 'Cooperativa'), ('SOLE_PROPRIETOR', 'Persona Natural Comerciante')], max_length=20)),
                ('company_size', models.CharField(choices=[('MICRO', 'Microempresa'), ('SMALL', 'Pequeña Empresa'), ('MEDIUM', 'Mediana Empresa'), ('LARGE', 'Gran Empresa')], max_length=10)),
                ('economic_sector', models.CharField(choices=[('AGRICULTURE', 'Agricultura'), ('MINING', 'Minería'), ('MANUFACTURING', 'Manufactura'), ('UTILITIES', 'Servicios Públicos'), ('CONSTRUCTION', 'Construcción'), ('COMMERCE', 'Comercio'), ('TRANSPORT', 'Transporte'), ('FINANCE', 'Financiero'), ('SERVICES', 'Servicios'), ('GOVERNMENT', 'Gobierno'), ('EDUCATION', 'Educación'), ('HEALTH', 'Salud'), ('TECHNOLOGY', 'Tecnología')], max_length=20)),
                ('legal_name', models.CharField(max_length=200)),
                ('trade_name', models.CharField(blank=True, max_length=200)),
                ('incorporation_date', models.DateField(blank=True, null=True)),
                ('incorporation_number', models.CharField(blank=True, max_length=50)),
                ('is_great_contributor', models.BooleanField(default=False)),
                ('great_contributor_from', models.DateField(blank=True, null=True)),
                ('is_self_withholding', models.BooleanField(default=False)),
                ('self_withholding_resolution', models.CharField(blank=True, max_length=100)),
                ('electronic_invoice_enabled', models.BooleanField(default=False)),
                ('invoice_prefix', models.CharField(blank=True, max_length=10)),
                ('invoice_resolution', models.CharField(blank=True, max_length=100)),
                ('invoice_resolution_date', models.DateField(blank=True, null=True)),
                ('invoice_from_number', models.IntegerField(blank=True, null=True)),
                ('invoice_to_number', models.IntegerField(blank=True, null=True)),
                ('technical_key', models.CharField(blank=True, max_length=200)),
                ('legal_representative_name', models.CharField(max_length=200)),
                ('legal_representative_document', models.CharField(max_length=20)),
                ('legal_representative_position', models.CharField(default='Representante Legal', max_length=100)),
                ('has_fiscal_reviewer', models.BooleanField(default=False)),
                ('fiscal_reviewer_name', models.CharField(blank=True, max_length=200)),
                ('fiscal_reviewer_document', models.CharField(blank=True, max_length=20)),
                ('fiscal_reviewer_professional_card', models.CharField(blank=True, max_length=50)),
                ('is_public_entity', models.BooleanField(default=False)),
                ('public_entity_type', models.CharField(blank=True, max_length=100)),
                ('public_entity_code', models.CharField(blank=True, max_length=50)),
                ('territorial_entity', models.CharField(blank=True, max_length=100)),
                ('is_part_of_group', models.BooleanField(default=False)),
                ('business_group_name', models.CharField(blank=True, max_length=200)),
                ('parent_company_nit', models.CharField(blank=True, max_length=20)),
                ('iso_certifications', models.TextField(blank=True)),
                ('chamber_commerce_registration', models.CharField(blank=True, max_length=50)),
                ('chamber_commerce_renewal_date', models.DateField(blank=True, null=True)),
                ('share_capital', models.DecimalField(decimal_places=2, default=0, max_digits=20)),
                ('paid_capital', models.DecimalField(decimal_places=2, default=0, max_digits=20)),
                ('total_assets', models.DecimalField(decimal_places=2, default=0, max_digits=20)),
                ('total_employees', models.IntegerField(default=0)),
                ('fiscal_year_start_month', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('uses_ifrs', models.BooleanField(default=False)),
                ('accounting_framework', models.CharField(choices=[('IFRS_FULL', 'NIIF Plenas'), ('IFRS_SME', 'NIIF para PYMES'), ('IFRS_MICRO', 'NIIF para Microempresas'), ('PUBLIC_ACCOUNTING', 'Contabilidad Pública'), ('SIMPLIFIED', 'Régimen Simplificado')], default='IFRS_SME', max_length=50)),
                ('logo', models.ImageField(blank=True, null=True, upload_to='companies/logos/')),
                ('header_image', models.ImageField(blank=True, null=True, upload_to='companies/headers/')),
                ('footer_image', models.ImageField(blank=True, null=True, upload_to='companies/footers/')),
                ('digital_signature', models.FileField(blank=True, null=True, upload_to='companies/signatures/')),
                ('report_header_text', models.TextField(blank=True)),
                ('report_footer_text', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('company', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='extended_info', to='core.company')),
            ],
            options={
                'verbose_name': 'Información Extendida de Empresa',
                'verbose_name_plural': 'Información Extendida de Empresas',
            },
        ),
        migrations.AlterUniqueTogether(
            name='thirdparty',
            unique_together={('company', 'document_type', 'document_number')},
        ),
    ]
