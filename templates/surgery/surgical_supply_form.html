{% extends 'base.html' %}
{% block title %}Agregar Insumo{% endblock %}
{% block content %}
<div class="container-fluid">
    <h2><i class="bi bi-box-seam"></i> Agregar Insumo Quirúrgico</h2>
    <p class="text-muted">Cirugía: {{ surgery.surgery_number }} - Paciente: {{ surgery.patient.nombre }}</p>

    <form method="post" class="mt-4">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label">Tipo de Insumo *</label>
                    <select class="form-select" name="supply_type" required>
                        <option value="suture">Sutura</option>
                        <option value="implant">Implante</option>
                        <option value="prosthesis">Prótesis</option>
                        <option value="mesh">Malla</option>
                        <option value="drainage">Drenaje</option>
                        <option value="catheter">Catéter</option>
                        <option value="graft">Injerto</option>
                        <option value="fixation">Material de Fijación</option>
                        <option value="hemostatic">Hemostático</option>
                        <option value="other">Otro</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Nombre del Insumo *</label>
                    <input type="text" class="form-control" name="name" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Descripción</label>
                    <textarea class="form-control" name="description" rows="2"></textarea>
                </div>
                <div class="mb-3">
                    <label class="form-label">Lote *</label>
                    <input type="text" class="form-control" name="lot_number" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Número de Serie</label>
                    <input type="text" class="form-control" name="serial_number">
                </div>
            </div>

            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label">Fabricante</label>
                    <input type="text" class="form-control" name="manufacturer">
                </div>
                <div class="mb-3">
                    <label class="form-label">Fecha de Vencimiento</label>
                    <input type="date" class="form-control" name="expiration_date">
                </div>
                <div class="mb-3">
                    <label class="form-label">Cantidad *</label>
                    <input type="number" class="form-control" name="quantity" value="1" min="0.01" step="0.01" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Unidad *</label>
                    <select class="form-select" name="unit" required>
                        <option value="unidad">Unidad</option>
                        <option value="caja">Caja</option>
                        <option value="ml">Mililitros</option>
                        <option value="g">Gramos</option>
                        <option value="cm">Centímetros</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Costo Unitario</label>
                    <input type="number" class="form-control" name="unit_cost" step="0.01" min="0">
                </div>
                <div class="mb-3">
                    <label class="form-label">Utilizado Por</label>
                    <input type="text" class="form-control" name="used_by" placeholder="Nombre del personal">
                </div>
            </div>

            <div class="col-12">
                <div class="mb-3">
                    <label class="form-label">Observaciones</label>
                    <textarea class="form-control" name="observations" rows="2"></textarea>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Registrar Insumo</button>
        <a href="{% url 'surgery:surgery_detail' surgery.id %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
